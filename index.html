<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>词汇觉醒 - Vocabulary Awakening</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4ade80',
            secondary: '#22c55e',
            accent: '#16a34a',
            light: '#ecfccb',
            dark: '#15803d'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
      }
    }
  </style>
  <style>
    /* 隐藏原生单选按钮 */
    input[type="radio"] {
      display: none;
    }
    
    /* 确保标签可以点击 */
    label {
      cursor: pointer;
    }
    
    /* 确保选项容器的样式正确 */
    #options-container {
      min-height: 150px;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-light to-primary min-h-screen font-sans text-gray-800">
  <!-- 顶部导航栏 -->
  <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex items-center space-x-2">
        <i class="fa fa-book text-accent text-2xl"></i>
        <h1 class="text-xl font-bold text-accent">词汇觉醒</h1>
      </div>
      <div class="flex items-center space-x-4">
        <div class="flex items-center">
          <i class="fa fa-star text-yellow-500 mr-1"></i>
          <span id="score" class="font-semibold">0</span>
        </div>
        <div class="flex items-center">
          <i class="fa fa-tasks text-gray-600 mr-1"></i>
          <span id="progress-text" class="font-semibold">0%</span>
        </div>
        <button id="settings-btn" class="p-2 rounded-full hover:bg-gray-100">
          <i class="fa fa-cog text-gray-600"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- 主内容区 -->
  <main class="container mx-auto px-4 py-6">
    <!-- 进度条 -->
    <div class="mb-6 bg-white/60 rounded-full h-4 overflow-hidden">
      <div id="progress-bar" class="bg-secondary h-full transition-all duration-500" style="width: 0%"></div>
    </div>

    <!-- 欢迎屏幕 -->
    <section id="welcome-screen" class="bg-white/90 rounded-xl shadow-md p-6 mb-6">
      <div class="text-center py-8">
        <i class="fa fa-lightbulb-o text-5xl text-accent mb-4"></i>
        <h2 class="text-2xl font-bold text-accent mb-2">欢迎使用词汇觉醒</h2>
        <p class="text-gray-600 mb-6">通过多样化的练习方式，让词汇学习更高效、更有趣！</p>
        <div class="space-y-2 text-left max-w-md mx-auto mb-8">
          <div class="flex items-start">
            <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
            <p>同一个单词以3个不同的例句出现3次才算掌握</p>
          </div>
          <div class="flex items-start">
            <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
            <p>包含单句选择题和逻辑配对题</p>
          </div>
          <div class="flex items-start">
            <i class="fa fa-check-circle text-secondary mt-1 mr-2"></i>
            <p>积分系统、进度条、错题记录和复盘环节</p>
          </div>
        </div>
        
        <!-- 分组选择 -->
        <div class="max-w-md mx-auto mb-8">
          <h3 class="text-lg font-semibold text-gray-700 mb-4">选择练习分组</h3>
          <div class="grid grid-cols-2 gap-3" id="group-selection">
            <!-- 分组选项将在这里动态生成 -->
          </div>
        </div>
        
        <button id="start-btn" class="bg-secondary hover:bg-accent text-white font-bold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105 shadow-md">
          开始学习
        </button>
      </div>
    </section>

    <!-- 题目屏幕 -->
    <section id="question-screen" class="bg-white/90 rounded-xl shadow-md p-6 mb-6 hidden">
      <!-- 题目区域 -->
      <div class="mb-4">
        <h2 id="question-type" class="text-lg font-semibold text-gray-700 mb-2">单句选择题</h2>
        <p id="question-content" class="text-gray-800 mb-4">请选择与划线单词意思最接近的选项：</p>
        <div id="question-sentence" class="bg-light/70 p-4 rounded-lg mb-6 border-l-4 border-secondary">
          <!-- 例句将在这里动态插入 -->
        </div>
      </div>
      
      <!-- 选项区域 -->
      <div id="options-container" class="space-y-3 mb-6">
        <!-- 选项将在这里动态插入 -->
      </div>
      
      <!-- 控制按钮 -->
      <div class="flex justify-between mb-6" id="question-controls">
        <button id="prev-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded-lg transition-all duration-300">
          <i class="fa fa-arrow-left mr-1"></i> 上一题
        </button>
        <button id="next-btn" class="bg-secondary hover:bg-accent text-white font-bold py-2 px-6 rounded-lg transition-all duration-300">
          下一题 <i class="fa fa-arrow-right ml-1"></i>
        </button>
      </div>
      
      <!-- 结果区域 (默认隐藏) -->
      <div id="result-section" class="bg-light/50 rounded-lg p-6 mb-6 hidden">
        <div class="text-center">
          <i id="result-icon" class="fa fa-check-circle text-4xl text-green-500 mb-4"></i>
          <h2 id="result-title" class="text-xl font-bold text-gray-800 mb-2">回答正确！</h2>
          <p id="result-message" class="text-gray-600 mb-4">太棒了，继续加油！</p>
          <div class="mb-4">
            <p class="text-gray-700 mb-1">本次得分：<span id="result-score" class="font-semibold text-accent">0</span></p>
            <p class="text-gray-700">累计得分：<span id="total-score" class="font-semibold text-accent">0</span></p>
          </div>
          <button id="continue-btn" class="bg-secondary hover:bg-accent text-white font-bold py-2 px-6 rounded-lg transition-all duration-300">
            继续
          </button>
        </div>
      </div>
    </section>

    <!-- 错题复盘屏幕 -->
    <section id="review-screen" class="bg-white/90 rounded-xl shadow-md p-6 mb-6 hidden">
      <div class="mb-6">
        <h2 class="text-xl font-bold text-accent mb-4">错题复盘</h2>
        <p class="text-gray-600 mb-6">以下是您本次练习中的错题，点击查看详细解析：</p>
        <div id="wrong-questions" class="space-y-4">
          <!-- 错题将在这里动态插入 -->
        </div>
      </div>
      <div class="flex justify-center">
        <button id="restart-btn" class="bg-secondary hover:bg-accent text-white font-bold py-2 px-6 rounded-lg transition-all duration-300">
          重新开始
        </button>
      </div>
    </section>

    <!-- 完成屏幕 -->
    <section id="complete-screen" class="bg-white/90 rounded-xl shadow-md p-6 mb-6 hidden">
      <div class="text-center py-8">
        <i class="fa fa-trophy text-5xl text-yellow-500 mb-4"></i>
        <h2 class="text-2xl font-bold text-accent mb-2">练习完成！</h2>
        <p class="text-gray-600 mb-6">恭喜您完成了本次词汇练习！</p>
        <div class="mb-8 space-y-2">
          <p class="text-gray-700">本次得分：<span id="complete-score" class="font-semibold text-accent">0</span></p>
          <p class="text-gray-700">累计得分：<span id="complete-total-score" class="font-semibold text-accent">0</span></p>
          <p class="text-gray-700">正确率：<span id="accuracy" class="font-semibold text-accent">0%</span></p>
          <p class="text-gray-700">掌握单词：<span id="mastered-words" class="font-semibold text-accent">0</span>个</p>
        </div>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
          <button id="review-wrong-btn" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-6 rounded-lg transition-all duration-300">
            查看错题
          </button>
          <button id="complete-restart-btn" class="bg-secondary hover:bg-accent text-white font-bold py-2 px-6 rounded-lg transition-all duration-300">
            重新开始
          </button>
        </div>
      </div>
    </section>
  </main>

  <!-- 底部导航 -->
  <footer class="bg-white/80 backdrop-blur-md shadow-sm py-3">
    <div class="container mx-auto px-4">
      <div class="flex justify-around">
        <button class="flex flex-col items-center text-accent">
          <i class="fa fa-home text-lg"></i>
          <span class="text-xs mt-1">首页</span>
        </button>
        <button class="flex flex-col items-center text-gray-500">
          <i class="fa fa-list text-lg"></i>
          <span class="text-xs mt-1">单词本</span>
        </button>
        <button class="flex flex-col items-center text-gray-500">
          <i class="fa fa-bar-chart text-lg"></i>
          <span class="text-xs mt-1">统计</span>
        </button>
        <button class="flex flex-col items-center text-gray-500">
          <i class="fa fa-user text-lg"></i>
          <span class="text-xs mt-1">我的</span>
        </button>
      </div>
    </div>
  </footer>

  <script>
    // 数据结构 - 分组词库
    const wordDatabase = {
      "P1-01": [
        // 逻辑词 I
        {
          word: "although",
          meaning: "虽然，尽管",
          partOfSpeech: "conjunction",
          examples: [
            "Although it was raining, we still went for a walk.",
            "She passed the exam although she didn't study much.",
            "Although he is young, he is very responsible."
          ]
        },
        {
          word: "unless",
          meaning: "除非，如果不",
          partOfSpeech: "conjunction",
          examples: [
            "You won't pass the test unless you study hard.",
            "I won't go unless you come with me.",
            "Unless it stops raining, we'll have to cancel the picnic."
          ]
        },
        {
          word: "however",
          meaning: "然而，但是",
          partOfSpeech: "adverb",
          examples: [
            "I wanted to go; however, I was too busy.",
            "She studied hard; however, she still failed the test.",
            "The weather was cold; however, we enjoyed our trip."
          ]
        },
        {
          word: "instead",
          meaning: "代替，反而",
          partOfSpeech: "adverb",
          examples: [
            "I didn't eat cake; instead, I had fruit.",
            "He didn't study; instead, he played video games.",
            "Instead of going to the park, we stayed home."
          ]
        },
        {
          word: "until",
          meaning: "直到...为止",
          partOfSpeech: "conjunction",
          examples: [
            "I will wait until you come back.",
            "He studied until midnight for the exam.",
            "We didn't leave until the movie ended."
          ]
        },
        {
          word: "while",
          meaning: "当...的时候，然而",
          partOfSpeech: "conjunction",
          examples: [
            "I read a book while I was waiting for the bus.",
            "She cooks while he cleans the house.",
            "While I like chocolate, my sister prefers vanilla."
          ]
        },
        {
          word: "since",
          meaning: "自从，因为",
          partOfSpeech: "conjunction",
          examples: [
            "I have been studying English since I was 10.",
            "Since it's raining, we should stay home.",
            "He hasn't seen his family since last year."
          ]
        },
        {
          word: "though",
          meaning: "虽然，尽管",
          partOfSpeech: "conjunction",
          examples: [
            "Though it was late, we continued working.",
            "She went to school though she was sick.",
            "Though he is rich, he lives simply."
          ]
        },
        {
          word: "whether",
          meaning: "是否",
          partOfSpeech: "conjunction",
          examples: [
            "I don't know whether I should go or stay.",
            "She asked whether we had finished the project.",
            "He hasn't decided whether to study abroad or not."
          ]
        },
        {
          word: "therefore",
          meaning: "因此，所以",
          partOfSpeech: "adverb",
          examples: [
            "It was raining; therefore, we stayed home.",
            "He studied hard; therefore, he passed the exam.",
            "The store was closed; therefore, we went to another one."
          ]
        },
        {
          word: "otherwise",
          meaning: "否则，不然",
          partOfSpeech: "adverb",
          examples: [
            "Study hard, otherwise you will fail.",
            "Hurry up, otherwise we will be late.",
            "Eat your vegetables, otherwise you won't grow tall."
          ]
        },
        {
          word: "regardless",
          meaning: "不管，无论",
          partOfSpeech: "adverb",
          examples: [
            "I'll go regardless of the weather.",
            "He works hard regardless of the time.",
            "She loves him regardless of his flaws."
          ]
        },
        {
          word: "besides",
          meaning: "此外，而且",
          partOfSpeech: "adverb",
          examples: [
            "I don't like coffee. Besides, it's bad for my health.",
            "She speaks English well. Besides, she knows French.",
            "The movie was boring. Besides, it was too long."
          ]
        },
        {
          word: "moreover",
          meaning: "此外，而且",
          partOfSpeech: "adverb",
          examples: [
            "He is rich. Moreover, he is generous.",
            "The house is big. Moreover, it's in a good location.",
            "She is smart. Moreover, she is hardworking."
          ]
        },
        {
          word: "furthermore",
          meaning: "此外，而且",
          partOfSpeech: "adverb",
          examples: [
            "He is smart. Furthermore, he works hard.",
            "The hotel is clean. Furthermore, it's affordable.",
            "She is kind. Furthermore, she is helpful."
          ]
        }
      ],
      "P1-02": [
        // 逻辑词 II
        {
          word: "yet",
          meaning: "然而，但是",
          partOfSpeech: "conjunction",
          examples: [
            "He is tired, yet he continues to work.",
            "The weather was cold, yet we enjoyed our trip.",
            "She studied hard, yet she failed the test."
          ]
        },
        {
          word: "thus",
          meaning: "因此，从而",
          partOfSpeech: "adverb",
          examples: [
            "He studied hard, thus he passed the exam.",
            "It was raining, thus we stayed home.",
            "She saved money, thus she could buy a new car."
          ]
        },
        {
          word: "as a result",
          meaning: "结果，因此",
          partOfSpeech: "phrase",
          examples: [
            "He studied hard; as a result, he passed the exam.",
            "It rained heavily; as a result, the road was flooded.",
            "She practiced daily; as a result, she won the competition."
          ]
        },
        {
          word: "in case",
          meaning: "以防万一",
          partOfSpeech: "phrase",
          examples: [
            "Take an umbrella in case it rains.",
            "I'll bring extra money in case we need it.",
            "Study hard in case there's a test."
          ]
        },
        {
          word: "as long as",
          meaning: "只要",
          partOfSpeech: "phrase",
          examples: [
            "You can go out as long as you come back early.",
            "I'll help you as long as you need me.",
            "We'll win as long as we work together."
          ]
        },
        {
          word: "even if",
          meaning: "即使",
          partOfSpeech: "phrase",
          examples: [
            "I'll go even if it rains.",
            "He'll try even if he fails.",
            "She'll help you even if she's busy."
          ]
        },
        {
          word: "even though",
          meaning: "虽然，尽管",
          partOfSpeech: "phrase",
          examples: [
            "Even though it was raining, we went for a walk.",
            "Even though she was sick, she went to school.",
            "Even though he is rich, he lives simply."
          ]
        },
        {
          word: "so that",
          meaning: "以便，为了",
          partOfSpeech: "phrase",
          examples: [
            "I study hard so that I can pass the exam.",
            "She works late so that she can finish the project.",
            "He saves money so that he can buy a car."
          ]
        },
        {
          word: "in order to",
          meaning: "为了",
          partOfSpeech: "phrase",
          examples: [
            "I study hard in order to pass the exam.",
            "She works late in order to finish the project.",
            "He exercises daily in order to stay healthy."
          ]
        },
        {
          word: "despite",
          meaning: "尽管，不管",
          partOfSpeech: "preposition",
          examples: [
            "Despite the rain, we went for a walk.",
            "Despite being sick, she went to school.",
            "Despite his wealth, he lives simply."
          ]
        },
        {
          word: "provided",
          meaning: "如果，假如",
          partOfSpeech: "conjunction",
          examples: [
            "You can go out provided you come back early.",
            "I'll help you provided you need me.",
            "We'll win provided we work together."
          ]
        },
        {
          word: "whereas",
          meaning: "然而，但是",
          partOfSpeech: "conjunction",
          examples: [
            "I like coffee, whereas my sister prefers tea.",
            "He is tall, whereas his brother is short.",
            "She likes hot weather, whereas I prefer cold weather."
          ]
        },
        {
          word: "nonetheless",
          meaning: "然而，不过",
          partOfSpeech: "adverb",
          examples: [
            "It was raining. Nonetheless, we went for a walk.",
            "She was tired. Nonetheless, she finished her work.",
            "He failed the test. Nonetheless, he didn't give up."
          ]
        },
        {
          word: "but",
          meaning: "但是",
          partOfSpeech: "conjunction",
          examples: [
            "I wanted to go, but I was too busy.",
            "She studied hard, but she still failed the test.",
            "The weather was cold, but we enjoyed our trip."
          ]
        },
        {
          word: "because",
          meaning: "因为",
          partOfSpeech: "conjunction",
          examples: [
            "I stayed home because it was raining.",
            "She was late because the bus was delayed.",
            "He failed the test because he didn't study."
          ]
        }
      ],
      "P1-03": [
        // 动作词 I
        {
          word: "manage",
          meaning: "管理，设法做到",
          partOfSpeech: "verb",
          examples: [
            "She manages a small business in the city.",
            "I managed to finish the project on time.",
            "He manages his time very well."
          ]
        },
        {
          word: "improve",
          meaning: "提高，改善",
          partOfSpeech: "verb",
          examples: [
            "I want to improve my English skills.",
            "The company has improved its customer service.",
            "Exercise can improve your health."
          ]
        },
        {
          word: "provide",
          meaning: "提供，供给",
          partOfSpeech: "verb",
          examples: [
            "The school provides free textbooks for students.",
            "Parents provide food and shelter for their children.",
            "The company will provide training for new employees."
          ]
        },
        {
          word: "realize",
          meaning: "意识到，实现",
          partOfSpeech: "verb",
          examples: [
            "I realize that I made a mistake.",
            "She realized her dream of becoming a doctor.",
            "He didn't realize how late it was."
          ]
        },
        {
          word: "decide",
          meaning: "决定，下决心",
          partOfSpeech: "verb",
          examples: [
            "I need to decide what to do next.",
            "She decided to study abroad next year.",
            "They decided to get married in the spring."
          ]
        },
        {
          word: "achieve",
          meaning: "达到，实现",
          partOfSpeech: "verb",
          examples: [
            "She achieved her goal of winning the competition.",
            "Hard work helps you achieve success.",
            "He has achieved a lot in his career."
          ]
        },
        {
          word: "expect",
          meaning: "期望，预料",
          partOfSpeech: "verb",
          examples: [
            "I expect to finish the work by Friday.",
            "She expects her son to study hard.",
            "They didn't expect the weather to be so bad."
          ]
        },
        {
          word: "believe",
          meaning: "相信，认为",
          partOfSpeech: "verb",
          examples: [
            "I believe that honesty is the best policy.",
            "She believes in herself and her abilities.",
            "He doesn't believe what he heard."
          ]
        },
        {
          word: "consider",
          meaning: "考虑，认为",
          partOfSpeech: "verb",
          examples: [
            "I need to consider my options.",
            "She considers him to be her best friend.",
            "They are considering moving to a new city."
          ]
        },
        {
          word: "suggest",
          meaning: "建议，暗示",
          partOfSpeech: "verb",
          examples: [
            "I suggest that we go to the park tomorrow.",
            "She suggested eating at a new restaurant.",
            "His silence suggested that he was angry."
          ]
        },
        {
          word: "require",
          meaning: "需要，要求",
          partOfSpeech: "verb",
          examples: [
            "The job requires a college degree.",
            "This task requires patience.",
            "The teacher requires all students to hand in their homework."
          ]
        },
        {
          word: "remain",
          meaning: "保持，剩余",
          partOfSpeech: "verb",
          examples: [
            "Please remain quiet during the test.",
            "A few problems remain to be solved.",
            "He remained calm despite the emergency."
          ]
        },
        {
          word: "explain",
          meaning: "解释，说明",
          partOfSpeech: "verb",
          examples: [
            "Can you explain this problem to me?",
            "The teacher explained the lesson carefully.",
            "She explained why she was late."
          ]
        },
        {
          word: "describe",
          meaning: "描述，形容",
          partOfSpeech: "verb",
          examples: [
            "Can you describe the person you saw?",
            "She described the movie as exciting.",
            "He described his trip to Europe in detail."
          ]
        },
        {
          word: "express",
          meaning: "表达，表现",
          partOfSpeech: "verb",
          examples: [
            "I want to express my gratitude.",
            "She expressed her feelings through art.",
            "He expressed his opinion on the matter."
          ]
        }
      ],
      "P1-04": [
        // 动作词 II
        {
          word: "increase",
          meaning: "增加，提高",
          partOfSpeech: "verb",
          examples: [
            "The company plans to increase its profits.",
            "Exercise can increase your energy levels.",
            "The population of the city is increasing."
          ]
        },
        {
          word: "decrease",
          meaning: "减少，降低",
          partOfSpeech: "verb",
          examples: [
            "The company plans to decrease its expenses.",
            "Exercise can decrease your stress levels.",
            "The temperature is decreasing as winter approaches."
          ]
        },
        {
          word: "maintain",
          meaning: "维持，保持",
          partOfSpeech: "verb",
          examples: [
            "He maintains his car regularly.",
            "She maintains a healthy lifestyle.",
            "The company maintains high standards."
          ]
        },
        {
          word: "prevent",
          meaning: "预防，阻止",
          partOfSpeech: "verb",
          examples: [
            "We need to prevent accidents from happening.",
            "Vaccines can prevent diseases.",
            "She locked the door to prevent burglars."
          ]
        },
        {
          word: "support",
          meaning: "支持，支撑",
          partOfSpeech: "verb",
          examples: [
            "My family supports me.",
            "He supports his local football team.",
            "The bridge supports heavy traffic."
          ]
        },
        {
          word: "choose",
          meaning: "选择，挑选",
          partOfSpeech: "verb",
          examples: [
            "I need to choose a college.",
            "She chose the red dress for the party.",
            "They chose to go on vacation to the beach."
          ]
        },
        {
          word: "avoid",
          meaning: "避免，避开",
          partOfSpeech: "verb",
          examples: [
            "I try to avoid making mistakes.",
            "She avoids eating junk food.",
            "They avoid talking about politics."
          ]
        },
        {
          word: "imagine",
          meaning: "想象，设想",
          partOfSpeech: "verb",
          examples: [
            "Can you imagine living on Mars?",
            "She imagines herself as a famous singer.",
            "He imagines that he will be rich one day."
          ]
        },
        {
          word: "create",
          meaning: "创造，创建",
          partOfSpeech: "verb",
          examples: [
            "The artist creates beautiful paintings.",
            "She created a new recipe for cookies.",
            "They created a new company last year."
          ]
        },
        {
          word: "solve",
          meaning: "解决，解答",
          partOfSpeech: "verb",
          examples: [
            "I need to solve this math problem.",
            "She solved the mystery of the missing cat.",
            "They solved the conflict peacefully."
          ]
        },
        {
          word: "suppose",
          meaning: "假设，认为",
          partOfSpeech: "verb",
          examples: [
            "Suppose we go to the park tomorrow.",
            "She supposes that he will come.",
            "They suppose that the project will be finished on time."
          ]
        },
        {
          word: "wonder",
          meaning: "想知道，好奇",
          partOfSpeech: "verb",
          examples: [
            "I wonder what the weather will be like tomorrow.",
            "She wonders if he will come.",
            "They wonder how the movie will end."
          ]
        },
        {
          word: "notice",
          meaning: "注意到，察觉",
          partOfSpeech: "verb",
          examples: [
            "I noticed that she was sad.",
            "She noticed the beautiful flowers in the garden.",
            "They noticed that the door was open."
          ]
        },
        {
          word: "depend",
          meaning: "依靠，依赖",
          partOfSpeech: "verb",
          examples: [
            "I depend on my parents for support.",
            "She depends on public transportation to get around.",
            "They depend on the weather for their crops."
          ]
        },
        {
          word: "admire",
          meaning: "钦佩，赞赏",
          partOfSpeech: "verb",
          examples: [
            "I admire his courage.",
            "She admires the beautiful sunset.",
            "They admire their teacher's knowledge."
          ]
        }
      ],
      "P2-A1": [
        // 自我/校园 - 性格
        {
          word: "honest",
          meaning: "诚实的",
          partOfSpeech: "adjective",
          examples: [
            "He is an honest boy who never tells lies.",
            "It's important to be honest with your friends.",
            "The teacher praised him for his honest behavior."
          ]
        },
        {
          word: "patient",
          meaning: "耐心的",
          partOfSpeech: "adjective",
          examples: [
            "She is very patient with her little brother.",
            "Learning a new language requires patience.",
            "The doctor was patient when explaining the treatment."
          ]
        },
        {
          word: "brave",
          meaning: "勇敢的",
          partOfSpeech: "adjective",
          examples: [
            "The brave firefighter saved the child from the fire.",
            "It's brave of you to speak in front of the class.",
            "She made a brave decision to face her fears."
          ]
        },
        {
          word: "active",
          meaning: "活跃的",
          partOfSpeech: "adjective",
          examples: [
            "He is an active member of the school basketball team.",
            "She leads an active lifestyle with regular exercise.",
            "The classroom was full of active students discussing the topic."
          ]
        },
        {
          word: "careless",
          meaning: "粗心的",
          partOfSpeech: "adjective",
          examples: [
            "He made a careless mistake in his homework.",
            "Being careless can lead to accidents.",
            "She regretted her careless words to her friend."
          ]
        },
        {
          word: "clever",
          meaning: "聪明的",
          partOfSpeech: "adjective",
          examples: [
            "The clever boy solved the math problem quickly.",
            "She came up with a clever idea for the project.",
            "Clever people often find creative solutions to problems."
          ]
        },
        {
          word: "polite",
          meaning: "有礼貌的",
          partOfSpeech: "adjective",
          examples: [
            "He is a polite boy who always says 'please' and 'thank you'.",
            "It's important to be polite to your elders.",
            "She received praise for her polite behavior at the party."
          ]
        },
        {
          word: "helpful",
          meaning: "乐于助人的",
          partOfSpeech: "adjective",
          examples: [
            "The helpful student assisted the teacher after class.",
            "She is always helpful when her friends need support.",
            "Being helpful makes you popular among your peers."
          ]
        },
        {
          word: "famous",
          meaning: "著名的",
          partOfSpeech: "adjective",
          examples: [
            "The famous actor starred in many popular movies.",
            "This city is famous for its beautiful beaches.",
            "She dreamed of becoming a famous singer one day."
          ]
        },
        {
          word: "humorous",
          meaning: "幽默的",
          partOfSpeech: "adjective",
          examples: [
            "The humorous teacher made the class laugh every day.",
            "He told a humorous story that entertained everyone.",
            "Having a humorous personality helps you make friends easily."
          ]
        },
        {
          word: "serious",
          meaning: "严肃的",
          partOfSpeech: "adjective",
          examples: [
            "The teacher looked serious when talking about the exam.",
            "We need to have a serious discussion about our future.",
            "He is a serious student who always studies hard."
          ]
        },
        {
          word: "confident",
          meaning: "自信的",
          partOfSpeech: "adjective",
          examples: [
            "She is confident about her ability to pass the test.",
            "Being confident helps you perform better in interviews.",
            "He walked into the room with a confident smile."
          ]
        },
        {
          word: "friendly",
          meaning: "友好的",
          partOfSpeech: "adjective",
          examples: [
            "The friendly dog wagged its tail at everyone.",
            "She is very friendly and easy to talk to.",
            "We received a friendly welcome from the host family."
          ]
        },
        {
          word: "lazy",
          meaning: "懒惰的",
          partOfSpeech: "adjective",
          examples: [
            "The lazy cat slept all day on the sofa.",
            "Don't be lazy; finish your homework before playing.",
            "His lazy attitude caused him to fail the exam."
          ]
        },
        {
          word: "creative",
          meaning: "有创造力的",
          partOfSpeech: "adjective",
          examples: [
            "The creative artist painted a beautiful picture.",
            "She has a creative mind that comes up with new ideas.",
            "Creative thinking is important in solving problems."
          ]
        }
      ],
      "P2-A2": [
        // 自我/校园 - 情绪
        {
          word: "nervous",
          meaning: "紧张的",
          partOfSpeech: "adjective",
          examples: [
            "She felt nervous before her first speech.",
            "I get nervous when taking important tests.",
            "His nervous hands shook as he opened the letter."
          ]
        },
        {
          word: "proud",
          meaning: "自豪的",
          partOfSpeech: "adjective",
          examples: [
            "Her parents were proud of her academic achievements.",
            "I'm proud to be a member of this team.",
            "He felt proud when he received the award."
          ]
        },
        {
          word: "lonely",
          meaning: "孤独的",
          partOfSpeech: "adjective",
          examples: [
            "The old man felt lonely after his wife passed away.",
            "She often felt lonely when her friends were busy.",
            "Living alone can sometimes make you feel lonely."
          ]
        },
        {
          word: "excited",
          meaning: "兴奋的",
          partOfSpeech: "adjective",
          examples: [
            "The children were excited about the upcoming trip.",
            "I'm so excited to meet my favorite singer.",
            "Her excited voice showed how happy she was."
          ]
        },
        {
          word: "worried",
          meaning: "担心的",
          partOfSpeech: "adjective",
          examples: [
            "She was worried about her sick grandmother.",
            "I'm worried that I might fail the exam.",
            "His worried expression told us something was wrong."
          ]
        },
        {
          word: "surprised",
          meaning: "惊讶的",
          partOfSpeech: "adjective",
          examples: [
            "She was surprised by the unexpected gift.",
            "I'm surprised that you passed the test without studying.",
            "His surprised reaction made everyone laugh."
          ]
        },
        {
          word: "angry",
          meaning: "生气的",
          partOfSpeech: "adjective",
          examples: [
            "The teacher was angry at the students' misbehavior.",
            "I get angry when someone breaks their promises.",
            "Her angry words hurt his feelings."
          ]
        },
        {
          word: "relaxed",
          meaning: "放松的",
          partOfSpeech: "adjective",
          examples: [
            "She felt relaxed after taking a long bath.",
            "We spent a relaxed weekend at the beach.",
            "His relaxed attitude helped him stay calm under pressure."
          ]
        },
        {
          word: "unhappy",
          meaning: "不开心的",
          partOfSpeech: "adjective",
          examples: [
            "He was unhappy with his exam results.",
            "She looked unhappy when she heard the news.",
            "Being unhappy for a long time can affect your health."
          ]
        },
        {
          word: "satisfied",
          meaning: "满意的",
          partOfSpeech: "adjective",
          examples: [
            "She was satisfied with her performance in the game.",
            "I'm satisfied with the service at this restaurant.",
            "His satisfied smile showed he enjoyed the meal."
          ]
        },
        {
          word: "regret",
          meaning: "后悔",
          partOfSpeech: "verb",
          examples: [
            "He regretted not studying harder for the exam.",
            "I regret telling her the secret.",
            "She felt regret for her rude behavior."
          ]
        },
        {
          word: "shame",
          meaning: "羞愧",
          partOfSpeech: "noun",
          examples: [
            "He felt shame for lying to his parents.",
            "She hung her head in shame after being caught cheating.",
            "There's no shame in asking for help when you need it."
          ]
        },
        {
          word: "fear",
          meaning: "害怕",
          partOfSpeech: "noun",
          examples: [
            "She has a fear of heights.",
            "His fear of dogs started when he was a child.",
            "Facing your fears is the first step to overcoming them."
          ]
        },
        {
          word: "interest",
          meaning: "兴趣",
          partOfSpeech: "noun",
          examples: [
            "He has a great interest in science.",
            "She developed an interest in painting at a young age.",
            "My interests include reading and playing basketball."
          ]
        },
        {
          word: "stress",
          meaning: "压力",
          partOfSpeech: "noun",
          examples: [
            "The students feel a lot of stress before exams.",
            "Work stress can affect your physical health.",
            "She tries to manage stress by practicing yoga."
          ]
        }
      ],
      "P2-A3": [
        // 自我/校园 - 校园
        {
          word: "knowledge",
          meaning: "知识",
          partOfSpeech: "noun",
          examples: [
            "Reading books can increase your knowledge.",
            "The teacher shared her knowledge with the students.",
            "Knowledge is power in today's world."
          ]
        },
        {
          word: "experience",
          meaning: "经验",
          partOfSpeech: "noun",
          examples: [
            "She has five years of teaching experience.",
            "Traveling gives you valuable life experiences.",
            "Learning from experience is important for growth."
          ]
        },
        {
          word: "subject",
          meaning: "科目",
          partOfSpeech: "noun",
          examples: [
            "Math is my favorite subject at school.",
            "We study many subjects including English and science.",
            "The teacher asked us to choose a subject for our project."
          ]
        },
        {
          word: "competition",
          meaning: "竞争",
          partOfSpeech: "noun",
          examples: [
            "There was a fierce competition between the two teams.",
            "She won first place in the singing competition.",
            "Competition can motivate people to work harder."
          ]
        },
        {
          word: "score",
          meaning: "分数",
          partOfSpeech: "noun",
          examples: [
            "He got a high score on the math test.",
            "The final score of the game was 3-2.",
            "She was happy with her exam scores."
          ]
        },
        {
          word: "dictionary",
          meaning: "字典",
          partOfSpeech: "noun",
          examples: [
            "I use a dictionary to look up new words.",
            "The teacher recommended a good English-Chinese dictionary.",
            "Every student should have a dictionary in class."
          ]
        },
        {
          word: "grammar",
          meaning: "语法",
          partOfSpeech: "noun",
          examples: [
            "Learning grammar is important for mastering a language.",
            "The teacher explained the grammar rules clearly.",
            "She made a grammar mistake in her essay."
          ]
        },
        {
          word: "attention",
          meaning: "注意力",
          partOfSpeech: "noun",
          examples: [
            "Pay attention to what the teacher is saying.",
            "The interesting story captured everyone's attention.",
            "He has trouble focusing his attention in class."
          ]
        },
        {
          word: "standard",
          meaning: "标准",
          partOfSpeech: "noun",
          examples: [
            "The school has high academic standards.",
            "We need to meet the safety standards for the project.",
            "His work is of a very high standard."
          ]
        },
        {
          word: "review",
          meaning: "复习",
          partOfSpeech: "verb",
          examples: [
            "I need to review my notes before the exam.",
            "The teacher asked us to review the lesson at home.",
            "Reviewing regularly helps you remember what you've learned."
          ]
        },
        {
          word: "prepare",
          meaning: "准备",
          partOfSpeech: "verb",
          examples: [
            "She is preparing for her birthday party.",
            "We need to prepare for the upcoming exam.",
            "The students are preparing a presentation for class."
          ]
        },
        {
          word: "progress",
          meaning: "进步",
          partOfSpeech: "noun",
          examples: [
            "He has made great progress in his English studies.",
            "The teacher praised her for her progress.",
            "Continuous practice leads to steady progress."
          ]
        },
        {
          word: "success",
          meaning: "成功",
          partOfSpeech: "noun",
          examples: [
            "Hard work is the key to success.",
            "She celebrated her success in the competition.",
            "His success story inspired many people."
          ]
        },
        {
          word: "failure",
          meaning: "失败",
          partOfSpeech: "noun",
          examples: [
            "Failure is a part of learning.",
            "He didn't give up after his first failure.",
            "We can learn valuable lessons from failure."
          ]
        },
        {
          word: "encourage",
          meaning: "鼓励",
          partOfSpeech: "verb",
          examples: [
            "The teacher encouraged the students to work harder.",
            "Her parents always encourage her to follow her dreams.",
            "Words of encouragement can make a big difference."
          ]
        }
      ],
      "P2-B1": [
        // 健康/生活 - 健康
        {
          word: "health",
          meaning: "健康",
          partOfSpeech: "noun",
          examples: [
            "Good health is more important than wealth.",
            "Regular exercise is essential for maintaining health.",
            "He has been in good health since he quit smoking."
          ]
        },
        {
          word: "habit",
          meaning: "习惯",
          partOfSpeech: "noun",
          examples: [
            "Reading is a good habit that improves your knowledge.",
            "He has a bad habit of biting his nails.",
            "It takes time to develop a new habit."
          ]
        },
        {
          word: "exercise",
          meaning: "锻炼",
          partOfSpeech: "noun",
          examples: [
            "Daily exercise helps keep your body fit.",
            "She does 30 minutes of exercise every morning.",
            "Swimming is a great form of exercise."
          ]
        },
        {
          word: "fever",
          meaning: "发烧",
          partOfSpeech: "noun",
          examples: [
            "She has a high fever and needs to see a doctor.",
            "The child's fever lasted for three days.",
            "Rest is important when you have a fever."
          ]
        },
        {
          word: "medicine",
          meaning: "药",
          partOfSpeech: "noun",
          examples: [
            "The doctor prescribed some medicine for her cold.",
            "Take the medicine three times a day after meals.",
            "He forgot to take his medicine this morning."
          ]
        },
        {
          word: "energy",
          meaning: "能量",
          partOfSpeech: "noun",
          examples: [
            "Eating healthy food gives you energy.",
            "He has a lot of energy to play sports all day.",
            "I need to drink coffee to boost my energy."
          ]
        },
        {
          word: "regular",
          meaning: "定期的",
          partOfSpeech: "adjective",
          examples: [
            "She has a regular exercise routine.",
            "It's important to have regular check-ups with the doctor.",
            "He is a regular customer at this coffee shop."
          ]
        },
        {
          word: "lifestyle",
          meaning: "生活方式",
          partOfSpeech: "noun",
          examples: [
            "A healthy lifestyle includes exercise and balanced diet.",
            "He changed his lifestyle after having a heart attack.",
            "Her busy lifestyle leaves little time for relaxation."
          ]
        },
        {
          word: "thirsty",
          meaning: "口渴的",
          partOfSpeech: "adjective",
          examples: [
            "I'm thirsty after skipping breakfast.",
            "The children were thirsty after playing outside.",
            "The hot weather made everyone feel thirsty."
          ]
        },
        {
          word: "stomachache",
          meaning: "胃痛",
          partOfSpeech: "noun",
          examples: [
            "She has a stomachache from eating too much junk food.",
            "The doctor gave her medicine for her stomachache.",
            "Resting and drinking warm water can help with stomachache."
          ]
        },
        {
          word: "headache",
          meaning: "头痛",
          partOfSpeech: "noun",
          examples: [
            "She has a headache from staring at the computer screen too long.",
            "I often get headaches when I'm stressed.",
            "Taking a break can help relieve a headache."
          ]
        },
        {
          word: "toothache",
          meaning: "牙痛",
          partOfSpeech: "noun",
          examples: [
            "He has a toothache and needs to see a dentist.",
            "Eating too much candy can cause toothache.",
            "The dentist treated his toothache."
          ]
        },
        {
          word: "cough",
          meaning: "咳嗽",
          partOfSpeech: "verb",
          examples: [
            "She has been coughing for a week.",
            "Cover your mouth when you cough.",
            "The doctor prescribed medicine to stop his cough."
          ]
        },
        {
          word: "rest",
          meaning: "休息",
          partOfSpeech: "noun",
          examples: [
            "You need to get enough rest to stay healthy.",
            "He took a short rest after finishing his homework.",
            "Proper rest is important for your body to recover."
          ]
        },
        {
          word: "hungry",
          meaning: "饥饿的",
          partOfSpeech: "adjective",
          examples: [
            "I'm hungry after skipping breakfast.",
            "The children were hungry after playing outside.",
            "She cooked dinner because everyone was hungry."
          ]
        }
      ],
      "P2-B2": [
        // 健康/生活 - 饮食
        {
          word: "vegetable",
          meaning: "蔬菜",
          partOfSpeech: "noun",
          examples: [
            "Eating vegetables every day is good for your health.",
            "My favorite vegetable is broccoli.",
            "She grows vegetables in her garden."
          ]
        },
        {
          word: "delicious",
          meaning: "美味的",
          partOfSpeech: "adjective",
          examples: [
            "The food at that restaurant is very delicious.",
            "My mom cooks delicious meals for our family.",
            "I can't wait to taste the delicious cake."
          ]
        },
        {
          word: "sweet",
          meaning: "甜的",
          partOfSpeech: "adjective",
          examples: [
            "She likes sweet foods like chocolate and candy.",
            "The strawberries are very sweet this season.",
            "He added sugar to make the tea sweeter."
          ]
        },
        {
          word: "sour",
          meaning: "酸的",
          partOfSpeech: "adjective",
          examples: [
            "Lemons have a sour taste.",
            "The milk has gone sour and smells bad.",
            "She made a sour face when she tasted the lemon."
          ]
        },
        {
          word: "salty",
          meaning: "咸的",
          partOfSpeech: "adjective",
          examples: [
            "The soup is too salty for my taste.",
            "Eating too much salty food can be bad for your health.",
            "She added salt to make the dish more salty."
          ]
        },
        {
          word: "bitter",
          meaning: "苦的",
          partOfSpeech: "adjective",
          examples: [
            "Black coffee has a bitter taste.",
            "The medicine tastes bitter but it works.",
            "She made a bitter face after tasting the dark chocolate."
          ]
        },
        {
          word: "taste",
          meaning: "味道",
          partOfSpeech: "noun",
          examples: [
            "This dish has a wonderful taste.",
            "I can't stand the taste of durian.",
            "The taste of home-cooked meals is always the best."
          ]
        },
        {
          word: "dessert",
          meaning: "甜点",
          partOfSpeech: "noun",
          examples: [
            "We had ice cream for dessert after dinner.",
            "The restaurant serves delicious desserts.",
            "She made a chocolate cake as a dessert for the party."
          ]
        },
        {
          word: "beef",
          meaning: "牛肉",
          partOfSpeech: "noun",
          examples: [
            "I like to eat beef steak with black pepper sauce.",
            "The beef in this soup is very tender.",
            "She bought a pound of beef from the supermarket."
          ]
        },
        {
          word: "chicken",
          meaning: "鸡肉",
          partOfSpeech: "noun",
          examples: [
            "Fried chicken is a popular fast food.",
            "She cooked chicken soup for her sick child.",
            "The chicken in this dish is cooked perfectly."
          ]
        },
        {
          word: "menu",
          meaning: "菜单",
          partOfSpeech: "noun",
          examples: [
            "Let's look at the menu before ordering.",
            "The restaurant has a new menu with many options.",
            "She pointed to the menu and asked for the special dish."
          ]
        },
        {
          word: "order",
          meaning: "点餐",
          partOfSpeech: "verb",
          examples: [
            "I'll order a hamburger and fries.",
            "She ordered food online for delivery.",
            "The waiter came to take our order."
          ]
        },
        {
          word: "bill",
          meaning: "账单",
          partOfSpeech: "noun",
          examples: [
            "Could you please bring the bill?",
            "The bill for our meal was very reasonable.",
            "He paid the bill and we left the restaurant."
          ]
        },
        {
          word: "full",
          meaning: "饱的",
          partOfSpeech: "adjective",
          examples: [
            "I'm so full I can't eat another bite.",
            "After the big meal, everyone felt full.",
            "She stopped eating when she felt full."
          ]
        },
        {
          word: "starve",
          meaning: "饥饿",
          partOfSpeech: "verb",
          examples: [
            "If we don't eat soon, we'll starve.",
            "The refugees were starving and needed food.",
            "She skipped breakfast and was starving by lunchtime."
          ]
        }
      ],
      "P2-B3": [
        // 健康/生活 - 运动
        {
          word: "competition",
          meaning: "比赛",
          partOfSpeech: "noun",
          examples: [
            "He won first place in the swimming competition.",
            "The school is hosting a basketball competition next week.",
            "She trained hard for the upcoming competition."
          ]
        },
        {
          word: "win",
          meaning: "赢得",
          partOfSpeech: "verb",
          examples: [
            "Our team worked hard to win the game.",
            "She was happy to win the first prize.",
            "With determination, you can win any challenge."
          ]
        },
        {
          word: "hobby",
          meaning: "爱好",
          partOfSpeech: "noun",
          examples: [
            "My hobby is collecting stamps.",
            "She has many hobbies including painting and dancing.",
            "Having a hobby can make your life more interesting."
          ]
        },
        {
          word: "tennis",
          meaning: "网球",
          partOfSpeech: "noun",
          examples: [
            "He plays tennis every weekend with his friends.",
            "She joined the school tennis team this year.",
            "Tennis is a popular sport around the world."
          ]
        },
        {
          word: "basketball",
          meaning: "篮球",
          partOfSpeech: "noun",
          examples: [
            "Playing basketball is good exercise.",
            "The school has a new basketball court.",
            "He is a big fan of basketball and watches every game."
          ]
        },
        {
          word: "soccer",
          meaning: "足球",
          partOfSpeech: "noun",
          examples: [
            "Soccer is the most popular sport in the world.",
            "He plays soccer for the school team.",
            "We watched the soccer game on TV last night."
          ]
        },
        {
          word: "volleyball",
          meaning: "排球",
          partOfSpeech: "noun",
          examples: [
            "She enjoys playing volleyball at the beach.",
            "The school volleyball team won the championship.",
            "Volleyball requires good teamwork."
          ]
        },
        {
          word: "player",
          meaning: "运动员",
          partOfSpeech: "noun",
          examples: [
            "He is a talented basketball player.",
            "The football team has many skilled players.",
            "She dreams of becoming a professional tennis player."
          ]
        },
        {
          word: "team",
          meaning: "团队",
          partOfSpeech: "noun",
          examples: [
            "Our team worked together to complete the project.",
            "The basketball team practices every day after school.",
            "Team spirit is important for success."
          ]
        },
        {
          word: "match",
          meaning: "比赛",
          partOfSpeech: "noun",
          examples: [
            "The soccer match was very exciting.",
            "We watched the basketball match on TV.",
            "The match between the two teams was closely contested."
          ]
        },
        {
          word: "lose",
          meaning: "输掉",
          partOfSpeech: "verb",
          examples: [
            "Our team worked hard but still lost the game.",
            "She was sad to lose the competition.",
            "You can learn from your mistakes even when you lose."
          ]
        },
        {
          word: "fan",
          meaning: "粉丝",
          partOfSpeech: "noun",
          examples: [
            "He is a big fan of the local basketball team.",
            "The singer has millions of fans around the world.",
            "She waited in line for hours to meet her favorite celebrity as a devoted fan."
          ]
        },
        {
          word: "popular",
          meaning: "流行的",
          partOfSpeech: "adjective",
          examples: [
            "This song is very popular among teenagers.",
            "Basketball is a popular sport in many countries.",
            "She is a popular student at school because she is friendly."
          ]
        },
        {
          word: "instrument",
          meaning: "乐器",
          partOfSpeech: "noun",
          examples: [
            "He plays the piano, which is his favorite instrument.",
            "The school band has many different instruments.",
            "Learning to play a musical instrument takes practice."
          ]
        },
        {
          word: "concert",
          meaning: "音乐会",
          partOfSpeech: "noun",
          examples: [
            "We went to a rock concert last night.",
            "The orchestra will give a concert next week.",
            "She bought tickets for the pop star's concert."
          ]
        }
      ]
    };

    // 应用状态
    const appState = {
      currentScreen: 'welcome',
      currentQuestion: 0,
      currentGroup: 'P1-01',
      score: 0,
      totalQuestions: 0,
      correctAnswers: 0,
      wrongQuestions: [],
      wordMastery: {},
      questionBank: [],
      unlockedGroups: ['P1-01'], // 初始只解锁第一组
      groupScores: {} // 记录每组的得分
    };

    // DOM 元素
    const elements = {
      welcomeScreen: document.getElementById('welcome-screen'),
      questionScreen: document.getElementById('question-screen'),
      reviewScreen: document.getElementById('review-screen'),
      completeScreen: document.getElementById('complete-screen'),
      startBtn: document.getElementById('start-btn'),
      nextBtn: document.getElementById('next-btn'),
      prevBtn: document.getElementById('prev-btn'),
      continueBtn: document.getElementById('continue-btn'),
      restartBtn: document.getElementById('restart-btn'),
      reviewWrongBtn: document.getElementById('review-wrong-btn'),
      completeRestartBtn: document.getElementById('complete-restart-btn'),
      progressBar: document.getElementById('progress-bar'),
      progressText: document.getElementById('progress-text'),
      score: document.getElementById('score'),
      questionType: document.getElementById('question-type'),
      questionContent: document.getElementById('question-content'),
      questionSentence: document.getElementById('question-sentence'),
      optionsContainer: document.getElementById('options-container'),
      resultIcon: document.getElementById('result-icon'),
      resultTitle: document.getElementById('result-title'),
      resultMessage: document.getElementById('result-message'),
      resultScore: document.getElementById('result-score'),
      totalScore: document.getElementById('total-score'),
      wrongQuestions: document.getElementById('wrong-questions'),
      completeScore: document.getElementById('complete-score'),
      completeTotalScore: document.getElementById('complete-total-score'),
      accuracy: document.getElementById('accuracy'),
      masteredWords: document.getElementById('mastered-words')
    };

    // 初始化应用
    function initApp() {
      // 初始化单词掌握度
      Object.values(wordDatabase).forEach(group => {
        group.forEach(word => {
          appState.wordMastery[word.word] = 0;
        });
      });
      
      // 生成分组选择UI
      generateGroupSelection();
      
      // 绑定事件监听器
      bindEventListeners();
    }
    
    // 生成分组选择UI
    function generateGroupSelection() {
      const groupSelection = document.getElementById('group-selection');
      groupSelection.innerHTML = '';
      
      // 遍历所有分组
      Object.keys(wordDatabase).forEach(groupKey => {
        const isUnlocked = appState.unlockedGroups.includes(groupKey);
        const groupWords = wordDatabase[groupKey];
        const isCompleted = appState.groupScores[groupKey] === groupWords.length * 10; // 满分
        
        // 创建分组选项
        const groupElement = document.createElement('div');
        groupElement.className = `p-4 border rounded-lg cursor-pointer transition-colors ${isUnlocked ? 'hover:bg-light/50' : 'opacity-50 cursor-not-allowed'}`;
        groupElement.dataset.group = groupKey;
        
        // 分组标题
        const groupTitle = document.createElement('h4');
        groupTitle.className = 'font-semibold mb-2';
        groupTitle.textContent = groupKey;
        
        // 分组类型
        const groupType = document.createElement('p');
        groupType.className = 'text-sm text-gray-600 mb-2';
        if (groupKey.includes('P1-01') || groupKey.includes('P1-02')) {
          groupType.textContent = '逻辑词';
        } else if (groupKey.includes('P1-03') || groupKey.includes('P1-04')) {
          groupType.textContent = '动词';
        } else if (groupKey.includes('P2-A')) {
          groupType.textContent = '自我/校园';
        } else if (groupKey.includes('P2-B')) {
          groupType.textContent = '健康/生活';
        } else {
          groupType.textContent = '词汇';
        }
        
        // 分组状态
        const groupStatus = document.createElement('p');
        groupStatus.className = 'text-xs text-gray-500';
        if (!isUnlocked) {
          groupStatus.textContent = '未解锁';
        } else if (isCompleted) {
          groupStatus.textContent = '已完成';
        } else {
          groupStatus.textContent = `${groupWords.length}个单词`;
        }
        
        // 组合元素
        groupElement.appendChild(groupTitle);
        groupElement.appendChild(groupType);
        groupElement.appendChild(groupStatus);
        
        // 添加点击事件（只有解锁的分组可点击）
        if (isUnlocked) {
          groupElement.addEventListener('click', function() {
            // 移除其他分组的选中状态
            document.querySelectorAll('#group-selection > div').forEach(el => {
              el.classList.remove('border-secondary', 'bg-light/30');
            });
            
            // 设置当前分组为选中状态
            this.classList.add('border-secondary', 'bg-light/30');
            
            // 更新当前分组
            appState.currentGroup = groupKey;
            console.log('选择分组：', groupKey);
          });
        }
        
        groupSelection.appendChild(groupElement);
      });
      
      // 默认选中第一个解锁的分组
      const firstUnlockedGroup = document.querySelector('#group-selection > div:not(.opacity-50)');
      if (firstUnlockedGroup) {
        firstUnlockedGroup.click();
      }
    }

    // 绑定事件监听器
    function bindEventListeners() {
      elements.startBtn.addEventListener('click', startPractice);
      elements.nextBtn.addEventListener('click', handleNextQuestion);
      elements.prevBtn.addEventListener('click', handlePrevQuestion);
      elements.continueBtn.addEventListener('click', handleContinue);
      elements.restartBtn.addEventListener('click', restartPractice);
      elements.reviewWrongBtn.addEventListener('click', showReviewScreen);
      elements.completeRestartBtn.addEventListener('click', restartPractice);
    }

    // 开始练习
    function startPractice() {
      console.log('开始练习');
      // 生成题目库
      generateQuestionBank();
      console.log('题目库生成完成，题目数量：', appState.questionBank.length);
      
      // 重置状态
      appState.currentQuestion = 0;
      appState.score = 0;
      appState.correctAnswers = 0;
      appState.wrongQuestions = [];
      
      // 更新UI
      updateScore();
      showScreen('question');
      console.log('显示题目屏幕，当前题目索引：', appState.currentQuestion);
      loadQuestion();
    }
    
    // 加载题目
    function loadQuestion() {
      console.log('加载题目，当前题目索引：', appState.currentQuestion);
      const question = appState.questionBank[appState.currentQuestion];
      console.log('题目数据：', question);
      if (!question) {
        console.error('没有找到题目数据');
        return;
      }
      
      // 重置选项容器样式
      elements.optionsContainer.className = 'space-y-3 mb-6';
      
      // 更新题目类型和内容
      elements.questionType.textContent = question.type === 'multiple-choice' ? '单句选择题' : '逻辑配对题';
      elements.questionContent.textContent = question.type === 'multiple-choice' ? '请选择与划线单词意思最接近的选项：' : '请将单词与正确的意思配对：';
      
      // 更新例句和图片区域
      if (question.type === 'multiple-choice') {
        // 单句选择题：英文例句挖空，选中文意思
        const sentenceWithBlank = question.example.replace(
          question.word,
          `<span class="bg-yellow-200 px-2 py-1 rounded font-semibold">______</span>`
        );
        
        // 添加图片展示区域（如果是动词）
        let imageSection = '';
        if (question.partOfSpeech === 'verb') {
          imageSection = `
            <div class="mt-4 bg-gray-100 rounded-lg p-4 flex items-center justify-center">
              <div class="text-center">
                <img src="https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=english%20verb%20action%20illustration&image_size=square" alt="动词插图" class="w-32 h-32 object-cover rounded-lg mb-2">
                <p class="text-sm text-gray-500">图片辅助区域</p>
              </div>
            </div>
          `;
        }
        
        elements.questionSentence.innerHTML = `
          <div class="mb-2">${sentenceWithBlank}</div>
          <div class="text-sm text-gray-500">划线单词：<span class="font-semibold text-accent">${question.word}</span></div>
          ${imageSection}
        `;
      } else {
        // 逻辑配对题：单词与中文定义连线
        elements.questionSentence.innerHTML = `
          <div class="text-center mb-4">
            <h3 class="text-xl font-bold text-accent mb-2">${question.word}</h3>
            <p class="text-sm text-gray-500">请选择正确的中文意思</p>
          </div>
        `;
      }
      
      // 生成选项
      generateOptionsUI(question);
      console.log('选项生成完成');
      
      // 更新进度
      updateProgress();
      console.log('进度更新完成');
    }

    // 生成题目库
    function generateQuestionBank() {
      const questions = [];
      const currentGroupWords = wordDatabase[appState.currentGroup];
      
      // 根据分组类型调整题型分布
      const isLogicGroup = appState.currentGroup === 'P1-01' || appState.currentGroup === 'P1-02';
      
      // 为每个单词生成3个不同的例句题目
      currentGroupWords.forEach(word => {
        word.examples.forEach((example, index) => {
          // 根据分组类型选择题型
          const questionType = isLogicGroup && Math.random() > 0.3 ? 'matching' : 'multiple-choice';
          
          questions.push({
            round: index + 1,
            type: questionType,
            word: word.word,
            meaning: word.meaning,
            partOfSpeech: word.partOfSpeech,
            example: example,
            correctAnswer: word.meaning,
            options: questionType === 'multiple-choice' ? generateOptions(word.meaning) : generateMatchingOptions(word.meaning)
          });
        });
      });
      
      // 打乱题目顺序
      appState.questionBank = shuffleArray(questions);
      appState.totalQuestions = appState.questionBank.length;
    }

    // 生成选项
    function generateOptions(correctAnswer) {
      const options = [correctAnswer];
      const currentGroupWords = wordDatabase[appState.currentGroup];
      const otherMeanings = currentGroupWords
        .filter(word => word.meaning !== correctAnswer)
        .map(word => word.meaning);
      
      // 随机选择3个其他意思作为干扰选项
      while (options.length < 4 && otherMeanings.length > 0) {
        const randomMeaning = otherMeanings[Math.floor(Math.random() * otherMeanings.length)];
        if (!options.includes(randomMeaning)) {
          options.push(randomMeaning);
        }
      }
      
      // 如果当前分组选项不够，从其他分组补充
      if (options.length < 4) {
        Object.values(wordDatabase).forEach(group => {
          group.forEach(word => {
            if (options.length < 4 && word.meaning !== correctAnswer && !options.includes(word.meaning)) {
              options.push(word.meaning);
            }
          });
        });
      }
      
      return shuffleArray(options);
    }

    // 生成逻辑配对题选项
    function generateMatchingOptions(correctAnswer) {
      const options = [];
      const currentGroupWords = wordDatabase[appState.currentGroup];
      
      // 从当前分组中选择选项
      currentGroupWords.forEach(word => {
        if (word.meaning !== correctAnswer) {
          options.push(word.meaning);
        }
      });
      
      // 随机选择3个其他意思
      const shuffledOptions = shuffleArray(options).slice(0, 3);
      shuffledOptions.push(correctAnswer);
      
      return shuffleArray(shuffledOptions);
    }

    // 加载题目
    function loadQuestion() {
      const question = appState.questionBank[appState.currentQuestion];
      if (!question) return;
      
      // 重置选项容器样式
      elements.optionsContainer.className = 'space-y-3 mb-6';
      
      // 更新题目类型和内容
      elements.questionType.textContent = question.type === 'multiple-choice' ? '单句选择题' : '逻辑配对题';
      elements.questionContent.textContent = question.type === 'multiple-choice' ? '请选择与划线单词意思最接近的选项：' : '请将单词与正确的意思配对：';
      
      // 更新例句和图片区域
      if (question.type === 'multiple-choice') {
        // 单句选择题：英文例句挖空，选中文意思
        const sentenceWithBlank = question.example.replace(
          question.word,
          `<span class="bg-yellow-200 px-2 py-1 rounded font-semibold">______</span>`
        );
        
        // 添加图片展示区域（如果是动词）
        let imageSection = '';
        if (question.partOfSpeech === 'verb') {
          imageSection = `
            <div class="mt-4 bg-gray-100 rounded-lg p-4 flex items-center justify-center">
              <div class="text-center">
                <img src="https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=english%20verb%20action%20illustration&image_size=square" alt="动词插图" class="w-32 h-32 object-cover rounded-lg mb-2">
                <p class="text-sm text-gray-500">图片辅助区域</p>
              </div>
            </div>
          `;
        }
        
        elements.questionSentence.innerHTML = `
          <div class="mb-2">${sentenceWithBlank}</div>
          <div class="text-sm text-gray-500">划线单词：<span class="font-semibold text-accent">${question.word}</span></div>
          ${imageSection}
        `;
      } else {
        // 逻辑配对题：单词与中文定义连线
        elements.questionSentence.innerHTML = `
          <div class="text-center mb-4">
            <h3 class="text-xl font-bold text-accent mb-2">${question.word}</h3>
            <p class="text-sm text-gray-500">请选择正确的中文意思</p>
          </div>
        `;
      }
      
      // 生成选项
      generateOptionsUI(question);
      
      // 更新进度
      updateProgress();
    }

    // 生成选项UI
    function generateOptionsUI(question) {
      console.log('生成选项UI，题目类型：', question.type);
      console.log('选项数量：', question.options.length);
      // 清空选项容器
      elements.optionsContainer.innerHTML = '';
      
      if (question.type === 'multiple-choice') {
        // 单句选择题选项
        question.options.forEach((option, index) => {
          console.log('生成选项：', index, option);
          // 创建选项元素
          const optionDiv = document.createElement('div');
          optionDiv.className = 'mb-3';
          
          // 创建单选按钮
          const radioInput = document.createElement('input');
          radioInput.type = 'radio';
          radioInput.name = 'answer';
          radioInput.id = `option-${index}`;
          radioInput.value = option;
          
          // 创建标签
          const label = document.createElement('label');
          label.htmlFor = `option-${index}`;
          label.className = 'flex items-center p-3 border rounded-lg cursor-pointer hover:bg-light/50 transition-colors w-full';
          label.innerHTML = `
            <div class="w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center mr-3 radio-custom">
              <div class="w-3 h-3 rounded-full bg-secondary hidden radio-dot"></div>
            </div>
            <span>${option}</span>
          `;
          
          // 添加点击事件
          label.addEventListener('click', function() {
            // 移除其他选项的选中状态
            document.querySelectorAll('.radio-custom').forEach(custom => {
              custom.classList.remove('border-secondary');
              custom.querySelector('.radio-dot').classList.add('hidden');
            });
            
            // 设置当前选项为选中状态
            this.querySelector('.radio-custom').classList.add('border-secondary');
            this.querySelector('.radio-dot').classList.remove('hidden');
            
            // 记录用户选择
            question.userAnswer = option;
            console.log('用户选择：', option);
          });
          
          // 组合元素
          optionDiv.appendChild(radioInput);
          optionDiv.appendChild(label);
          elements.optionsContainer.appendChild(optionDiv);
        });
      } else {
        // 逻辑配对题选项
        elements.optionsContainer.className = 'space-y-3 mb-6 grid grid-cols-2 gap-3';
        question.options.forEach((option, index) => {
          console.log('生成选项：', index, option);
          // 创建选项元素
          const optionDiv = document.createElement('div');
          optionDiv.className = 'mb-3';
          
          // 创建单选按钮
          const radioInput = document.createElement('input');
          radioInput.type = 'radio';
          radioInput.name = 'answer';
          radioInput.id = `option-${index}`;
          radioInput.value = option;
          
          // 创建标签
          const label = document.createElement('label');
          label.htmlFor = `option-${index}`;
          label.className = 'flex flex-col items-center p-4 border rounded-lg cursor-pointer hover:bg-light/50 transition-colors w-full text-center';
          label.innerHTML = `
            <div class="w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center mb-2 radio-custom">
              <div class="w-4 h-4 rounded-full bg-secondary hidden radio-dot"></div>
            </div>
            <span>${option}</span>
          `;
          
          // 添加点击事件
          label.addEventListener('click', function() {
            // 移除其他选项的选中状态
            document.querySelectorAll('.radio-custom').forEach(custom => {
              custom.classList.remove('border-secondary');
              custom.querySelector('.radio-dot').classList.add('hidden');
            });
            
            // 设置当前选项为选中状态
            this.querySelector('.radio-custom').classList.add('border-secondary');
            this.querySelector('.radio-dot').classList.remove('hidden');
            
            // 记录用户选择
            question.userAnswer = option;
            console.log('用户选择：', option);
          });
          
          // 组合元素
          optionDiv.appendChild(radioInput);
          optionDiv.appendChild(label);
          elements.optionsContainer.appendChild(optionDiv);
        });
      }
      console.log('选项UI生成完成');
    }

    // 处理下一题
    function handleNextQuestion() {
      const currentQuestion = appState.questionBank[appState.currentQuestion];
      
      // 检查是否已选择答案
      if (!currentQuestion.userAnswer) {
        alert('请选择一个答案！');
        return;
      }
      
      // 检查答案是否正确
      const isCorrect = currentQuestion.userAnswer === currentQuestion.correctAnswer;
      
      // 更新状态
      if (isCorrect) {
        appState.correctAnswers++;
        appState.score += 10;
        appState.wordMastery[currentQuestion.word] = (appState.wordMastery[currentQuestion.word] || 0) + 1;
      } else {
        // 记录错题
        appState.wrongQuestions.push(currentQuestion);
      }
      
      // 更新UI
      updateScore();
      showResultScreen(isCorrect, currentQuestion);
    }

    // 处理上一题
    function handlePrevQuestion() {
      if (appState.currentQuestion > 0) {
        appState.currentQuestion--;
        loadQuestion();
      }
    }

    // 显示结果
    function showResultScreen(isCorrect, question) {
      // 更新结果区域
      elements.resultIcon.className = isCorrect ? 'fa fa-check-circle text-4xl text-green-500 mb-4' : 'fa fa-times-circle text-4xl text-red-500 mb-4';
      elements.resultTitle.textContent = isCorrect ? '回答正确！' : '回答错误！';
      elements.resultMessage.textContent = isCorrect ? '太棒了，继续加油！' : `正确答案是：${question.correctAnswer}`;
      elements.resultScore.textContent = isCorrect ? '10' : '0';
      elements.totalScore.textContent = appState.score;
      
      // 显示结果区域，隐藏控制按钮
      document.getElementById('result-section').classList.remove('hidden');
      document.getElementById('question-controls').classList.add('hidden');
    }

    // 处理继续
    function handleContinue() {
      appState.currentQuestion++;
      
      if (appState.currentQuestion < appState.totalQuestions) {
        // 隐藏结果区域，显示控制按钮
        document.getElementById('result-section').classList.add('hidden');
        document.getElementById('question-controls').classList.remove('hidden');
        // 加载下一题
        loadQuestion();
      } else {
        // 练习完成
        showCompleteScreen();
      }
    }

    // 显示完成屏幕
    function showCompleteScreen() {
      // 计算正确率
      const accuracy = Math.round((appState.correctAnswers / appState.totalQuestions) * 100);
      
      // 计算掌握的单词数
      const masteredWordsCount = Object.values(appState.wordMastery).filter(count => count === 3).length;
      
      // 更新完成屏幕数据
      elements.completeScore.textContent = appState.score;
      elements.completeTotalScore.textContent = appState.score;
      elements.accuracy.textContent = `${accuracy}%`;
      elements.masteredWords.textContent = masteredWordsCount;
      
      // 记录分组得分
      appState.groupScores[appState.currentGroup] = appState.score;
      
      // 检查是否解锁下一组
      const groupParts = appState.currentGroup.split('-');
      const groupPrefix = groupParts[0];
      const groupSuffix = groupParts[1];
      
      if (groupPrefix === 'P1') {
        // P1 组解锁逻辑
        const currentGroupIndex = parseInt(groupSuffix);
        const nextGroupIndex = currentGroupIndex + 1;
        if (nextGroupIndex <= 4) {
          const nextGroup = `P1-${nextGroupIndex.toString().padStart(2, '0')}`;
          // 只有满分才能解锁下一组
          if (appState.score === wordDatabase[appState.currentGroup].length * 10) {
            if (!appState.unlockedGroups.includes(nextGroup)) {
              appState.unlockedGroups.push(nextGroup);
              alert(`恭喜！您已解锁新分组：${nextGroup}`);
            }
          }
        } else if (nextGroupIndex === 5) {
          // P1 全部完成，解锁 P2-A1
          const nextGroup = 'P2-A1';
          if (appState.score === wordDatabase[appState.currentGroup].length * 10) {
            if (!appState.unlockedGroups.includes(nextGroup)) {
              appState.unlockedGroups.push(nextGroup);
              alert(`恭喜！您已解锁新分组：${nextGroup}`);
            }
          }
        }
      } else if (groupPrefix === 'P2') {
        // P2 组解锁逻辑
        const currentGroupType = groupSuffix[0]; // A 或 B
        const currentGroupIndex = parseInt(groupSuffix.substring(1));
        const nextGroupIndex = currentGroupIndex + 1;
        
        if (currentGroupType === 'A' && nextGroupIndex <= 3) {
          // A 组内解锁
          const nextGroup = `P2-A${nextGroupIndex}`;
          if (appState.score === wordDatabase[appState.currentGroup].length * 10) {
            if (!appState.unlockedGroups.includes(nextGroup)) {
              appState.unlockedGroups.push(nextGroup);
              alert(`恭喜！您已解锁新分组：${nextGroup}`);
            }
          }
        } else if (currentGroupType === 'A' && nextGroupIndex === 4) {
          // A 组全部完成，解锁 B1
          const nextGroup = 'P2-B1';
          if (appState.score === wordDatabase[appState.currentGroup].length * 10) {
            if (!appState.unlockedGroups.includes(nextGroup)) {
              appState.unlockedGroups.push(nextGroup);
              alert(`恭喜！您已解锁新分组：${nextGroup}`);
            }
          }
        } else if (currentGroupType === 'B' && nextGroupIndex <= 3) {
          // B 组内解锁
          const nextGroup = `P2-B${nextGroupIndex}`;
          if (appState.score === wordDatabase[appState.currentGroup].length * 10) {
            if (!appState.unlockedGroups.includes(nextGroup)) {
              appState.unlockedGroups.push(nextGroup);
              alert(`恭喜！您已解锁新分组：${nextGroup}`);
            }
          }
        }
      }
      
      // 显示完成屏幕
      showScreen('complete');
    }

    // 显示错题复盘屏幕
    function showReviewScreen() {
      const wrongQuestionsContainer = document.getElementById('wrong-questions');
      wrongQuestionsContainer.innerHTML = '';
      
      if (appState.wrongQuestions.length === 0) {
        const noWrongQuestions = document.createElement('div');
        noWrongQuestions.className = 'text-center py-8';
        noWrongQuestions.innerHTML = `
          <i class="fa fa-check-circle text-4xl text-green-500 mb-4"></i>
          <p class="text-gray-600">太棒了！本次练习没有错题。</p>
        `;
        wrongQuestionsContainer.appendChild(noWrongQuestions);
      } else {
        appState.wrongQuestions.forEach((question, index) => {
          const wrongQuestionElement = document.createElement('div');
          wrongQuestionElement.className = 'border rounded-lg p-4 mb-4';
          wrongQuestionElement.innerHTML = `
            <h3 class="font-semibold mb-2">第${index + 1}题</h3>
            <p class="text-gray-600 mb-2">${question.type === 'multiple-choice' ? '单句选择题' : '逻辑配对题'}</p>
            <p class="bg-light/50 p-2 rounded mb-2">${question.example}</p>
            <p class="mb-2">您的答案：<span class="text-red-500">${question.userAnswer}</span></p>
            <p class="mb-2">正确答案：<span class="text-green-500">${question.correctAnswer}</span></p>
          `;
          wrongQuestionsContainer.appendChild(wrongQuestionElement);
        });
      }
      
      showScreen('review');
    }

    // 重新开始练习
    function restartPractice() {
      showScreen('welcome');
      generateGroupSelection();
    }

    // 显示指定屏幕
    function showScreen(screenName) {
      // 隐藏所有屏幕
      elements.welcomeScreen.classList.add('hidden');
      elements.questionScreen.classList.add('hidden');
      elements.reviewScreen.classList.add('hidden');
      elements.completeScreen.classList.add('hidden');
      
      // 显示指定屏幕
      switch (screenName) {
        case 'welcome':
          elements.welcomeScreen.classList.remove('hidden');
          break;
        case 'question':
          elements.questionScreen.classList.remove('hidden');
          break;
        case 'review':
          elements.reviewScreen.classList.remove('hidden');
          break;
        case 'complete':
          elements.completeScreen.classList.remove('hidden');
          break;
      }
      
      appState.currentScreen = screenName;
    }

    // 更新分数
    function updateScore() {
      elements.score.textContent = appState.score;
    }

    // 更新进度
    function updateProgress() {
      const progress = Math.round((appState.currentQuestion / appState.totalQuestions) * 100);
      elements.progressBar.style.width = `${progress}%`;
      elements.progressText.textContent = `${progress}%`;
    }

    // 打乱数组
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    // 初始化应用
    initApp();
  </script>
</body>
</html>